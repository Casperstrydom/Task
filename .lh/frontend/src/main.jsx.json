{
    "sourceFile": "frontend/src/main.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 12,
            "patches": [
                {
                    "date": 1757405603072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757405664064,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import { StrictMode } from \"react\";\n import { createRoot } from \"react-dom/client\";\n-import \"./index.css\";\n+import \"./main/index.css\";\n import Home from \"./main/Home.jsx\";\n \n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n"
                },
                {
                    "date": 1757416209783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,14 @@\n+import { StrictMode } from \"react\";\n+import { createRoot } from \"react-dom/client\";\n+import \"./main/index.css\";\n+import Register from \"./main/Register.jsx\";\n+import Login from \"./main/Login.jsx\";\n+import Home from \"./main/Home.jsx\";\n+\n+createRoot(document.getElementById(\"root\")).render(\n+  <StrictMode>\n+    <Home />\n+    <Login />\n+    <Register />\n+  </StrictMode>\n+);\n"
                },
                {
                    "date": 1757416984342,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,14 +11,4 @@\n     <Login />\n     <Register />\n   </StrictMode>\n );\n-import { StrictMode } from \"react\";\n-import { createRoot } from \"react-dom/client\";\n-import \"./main/index.css\";\n-import Home from \"./main/Home.jsx\";\n-\n-createRoot(document.getElementById(\"root\")).render(\n-  <StrictMode>\n-    <Home />\n-  </StrictMode>\n-);\n"
                },
                {
                    "date": 1757419185963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,19 @@\n+import { StrictMode } from \"react\";\n+import { createRoot } from \"react-dom/client\";\n+import { BrowserRouter, Routes, Route } from \"react-router-dom\";\n+import \"./main/index.css\";\n+import Register from \"./main/Register.jsx\";\n+import Login from \"./main/Login.jsx\";\n+import Home from \"./main/Home.jsx\";\n+\n+createRoot(document.getElementById(\"root\")).render(\n+  <StrictMode>\n+    <BrowserRouter>\n+      <Routes>\n+        <Route path=\"/\" element={<Home />} />\n+        <Route path=\"/login\" element={<Login />} />\n+        <Route path=\"/register\" element={<Register />} />\n+      </Routes>\n+    </BrowserRouter>\n+  </StrictMode>\n+);\n"
                },
                {
                    "date": 1757662882236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,18 +16,4 @@\n       </Routes>\n     </BrowserRouter>\n   </StrictMode>\n );\n-import { StrictMode } from \"react\";\n-import { createRoot } from \"react-dom/client\";\n-import \"./main/index.css\";\n-import Register from \"./main/Register.jsx\";\n-import Login from \"./main/Login.jsx\";\n-import Home from \"./main/Home.jsx\";\n-\n-createRoot(document.getElementById(\"root\")).render(\n-  <StrictMode>\n-    <Home />\n-    <Login />\n-    <Register />\n-  </StrictMode>\n-);\n"
                },
                {
                    "date": 1757662921434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n     <BrowserRouter>\n       <Routes>\n-        <Route path=\"/\" element={<Home />} />\n+        <Route path=\"/home\" element={<Home />} />\n         <Route path=\"/login\" element={<Login />} />\n         <Route path=\"/register\" element={<Register />} />\n       </Routes>\n     </BrowserRouter>\n"
                },
                {
                    "date": 1757662934766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,35 @@\n import { StrictMode } from \"react\";\n import { createRoot } from \"react-dom/client\";\n-import { BrowserRouter, Routes, Route } from \"react-router-dom\";\n+import { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\n import \"./main/index.css\";\n import Register from \"./main/Register.jsx\";\n import Login from \"./main/Login.jsx\";\n import Home from \"./main/Home.jsx\";\n \n+// Protects routes that need authentication\n+function PrivateRoute({ children }) {\n+  const token = localStorage.getItem(\"token\");\n+  return token ? children : <Navigate to=\"/\" />;\n+}\n+\n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n     <BrowserRouter>\n       <Routes>\n-        <Route path=\"/home\" element={<Home />} />\n-        <Route path=\"/login\" element={<Login />} />\n+        {/* Login is now the default route */}\n+        <Route path=\"/\" element={<Login />} />\n         <Route path=\"/register\" element={<Register />} />\n+\n+        {/* Home is protected and requires login */}\n+        <Route\n+          path=\"/home\"\n+          element={\n+            <PrivateRoute>\n+              <Home />\n+            </PrivateRoute>\n+          }\n+        />\n       </Routes>\n     </BrowserRouter>\n   </StrictMode>\n );\n"
                },
                {
                    "date": 1757663067809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,13 @@\n import { StrictMode } from \"react\";\n import { createRoot } from \"react-dom/client\";\n-import { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\n+import { BrowserRouter, Routes, Route } from \"react-router-dom\";\n import \"./main/index.css\";\n import Register from \"./main/Register.jsx\";\n import Login from \"./main/Login.jsx\";\n import Home from \"./main/Home.jsx\";\n+import PrivateRoute from \"./components/PrivateRoute.jsx\"; // ✅ import it\n \n-// Protects routes that need authentication\n-function PrivateRoute({ children }) {\n-  const token = localStorage.getItem(\"token\");\n-  return token ? children : <Navigate to=\"/\" />;\n-}\n-\n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n     <BrowserRouter>\n       <Routes>\n"
                },
                {
                    "date": 1757663238969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,27 +4,16 @@\n import \"./main/index.css\";\n import Register from \"./main/Register.jsx\";\n import Login from \"./main/Login.jsx\";\n import Home from \"./main/Home.jsx\";\n-import PrivateRoute from \"./components/PrivateRoute.jsx\"; // ✅ import it\n \n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n     <BrowserRouter>\n       <Routes>\n-        {/* Login is now the default route */}\n-        <Route path=\"/\" element={<Login />} />\n+        <Route path=\"/home\" element={<Home />} />\n+        <Route path=\"/login\" element={<Login />} />\n         <Route path=\"/register\" element={<Register />} />\n-\n-        {/* Home is protected and requires login */}\n-        <Route\n-          path=\"/home\"\n-          element={\n-            <PrivateRoute>\n-              <Home />\n-            </PrivateRoute>\n-          }\n-        />\n       </Routes>\n     </BrowserRouter>\n   </StrictMode>\n );\n"
                },
                {
                    "date": 1757669395744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,72 @@\n-import { StrictMode } from \"react\";\n+import { StrictMode, useEffect } from \"react\";\n import { createRoot } from \"react-dom/client\";\n import { BrowserRouter, Routes, Route } from \"react-router-dom\";\n+import axios from \"axios\";\n+\n import \"./main/index.css\";\n import Register from \"./main/Register.jsx\";\n import Login from \"./main/Login.jsx\";\n import Home from \"./main/Home.jsx\";\n \n-createRoot(document.getElementById(\"root\")).render(\n-  <StrictMode>\n+// Base URL for backend API\n+const apiBase = import.meta.env.VITE_API_BASE || \"http://localhost:5000\";\n+\n+function AppWrapper() {\n+  useEffect(() => {\n+    // Register service worker\n+    if (\"serviceWorker\" in navigator) {\n+      navigator.serviceWorker\n+        .register(\"/sw.js\")\n+        .then(() => console.log(\"✅ Service Worker registered\"))\n+        .catch((err) => console.error(\"❌ SW registration failed:\", err));\n+    }\n+\n+    // Subscribe user for push notifications\n+    const subscribeUser = async () => {\n+      if (!(\"serviceWorker\" in navigator) || !(\"PushManager\" in window)) return;\n+\n+      try {\n+        const registration = await navigator.serviceWorker.ready;\n+\n+        const subscription = await registration.pushManager.subscribe({\n+          userVisibleOnly: true,\n+          applicationServerKey: urlBase64ToUint8Array(\n+            import.meta.env.VITE_VAPID_PUBLIC_KEY\n+          ),\n+        });\n+\n+        // Send subscription to backend\n+        await axios.post(`${apiBase}/subscribe`, subscription);\n+        console.log(\"✅ Subscribed for push notifications\");\n+      } catch (err) {\n+        console.error(\"❌ Push subscription failed:\", err);\n+      }\n+    };\n+\n+    subscribeUser();\n+  }, []);\n+\n+  // Helper function to convert VAPID key\n+  function urlBase64ToUint8Array(base64String) {\n+    const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n+    const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n+    const rawData = window.atob(base64);\n+    return Uint8Array.from([...rawData].map((c) => c.charCodeAt(0)));\n+  }\n+\n+  return (\n     <BrowserRouter>\n       <Routes>\n         <Route path=\"/home\" element={<Home />} />\n         <Route path=\"/login\" element={<Login />} />\n         <Route path=\"/register\" element={<Register />} />\n       </Routes>\n     </BrowserRouter>\n+  );\n+}\n+\n+createRoot(document.getElementById(\"root\")).render(\n+  <StrictMode>\n+    <AppWrapper />\n   </StrictMode>\n );\n"
                },
                {
                    "date": 1757669491086,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,74 +1,10 @@\n-import { StrictMode, useEffect } from \"react\";\n+import { StrictMode } from \"react\";\n import { createRoot } from \"react-dom/client\";\n-import { BrowserRouter, Routes, Route } from \"react-router-dom\";\n-import axios from \"axios\";\n-\n import \"./main/index.css\";\n-import Register from \"./main/Register.jsx\";\n-import Login from \"./main/Login.jsx\";\n-import Home from \"./main/Home.jsx\";\n+import App from \"./main/App.jsx\";\n \n-// Base URL for backend API\n-const apiBase = import.meta.env.VITE_API_BASE || \"http://localhost:5000\";\n-\n-function AppWrapper() {\n-  useEffect(() => {\n-    // Register service worker\n-    if (\"serviceWorker\" in navigator) {\n-      navigator.serviceWorker\n-        .register(\"/sw.js\")\n-        .then(() => console.log(\"✅ Service Worker registered\"))\n-        .catch((err) => console.error(\"❌ SW registration failed:\", err));\n-    }\n-\n-    // Subscribe user for push notifications\n-    const subscribeUser = async () => {\n-      if (!(\"serviceWorker\" in navigator) || !(\"PushManager\" in window)) return;\n-\n-      try {\n-        const registration = await navigator.serviceWorker.ready;\n-\n-        const subscription = await registration.pushManager.subscribe({\n-          userVisibleOnly: true,\n-          applicationServerKey: urlBase64ToUint8Array(\n-            import.meta.env.VITE_VAPID_PUBLIC_KEY\n-          ),\n-        });\n-\n-        // Send subscription to backend\n-        await axios.post(`${apiBase}/subscribe`, subscription);\n-        console.log(\"✅ Subscribed for push notifications\");\n-      } catch (err) {\n-        console.error(\"❌ Push subscription failed:\", err);\n-      }\n-    };\n-\n-    subscribeUser();\n-  }, []);\n-\n-  // Helper function to convert VAPID key\n-  function urlBase64ToUint8Array(base64String) {\n-    const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n-    const base64 = (base64String + padding)\n-      .replace(/-/g, \"+\")\n-      .replace(/_/g, \"/\");\n-    const rawData = window.atob(base64);\n-    return Uint8Array.from([...rawData].map((c) => c.charCodeAt(0)));\n-  }\n-\n-  return (\n-    <BrowserRouter>\n-      <Routes>\n-        <Route path=\"/home\" element={<Home />} />\n-        <Route path=\"/login\" element={<Login />} />\n-        <Route path=\"/register\" element={<Register />} />\n-      </Routes>\n-    </BrowserRouter>\n-  );\n-}\n-\n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n-    <AppWrapper />\n+    <App />\n   </StrictMode>\n );\n"
                },
                {
                    "date": 1757669700330,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import { StrictMode } from \"react\";\n import { createRoot } from \"react-dom/client\";\n import \"./main/index.css\";\n-import App from \"./main/App.jsx\";\n+import App from \"./App\"\n \n createRoot(document.getElementById(\"root\")).render(\n   <StrictMode>\n     <App />\n"
                }
            ],
            "date": 1757405603072,
            "name": "Commit-0",
            "content": "import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport \"./index.css\";\nimport Home from \"./main/Home.jsx\";\n\ncreateRoot(document.getElementById(\"root\")).render(\n  <StrictMode>\n    <Home />\n  </StrictMode>\n);\n"
        }
    ]
}