{
    "sourceFile": "frontend/src/main/HomePrivate.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1758780678993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1758791647251,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,77 @@\n-import React from \"react\";\r\n-import HomePrivateComponent from \"../components/homePrivateComponent\";\r\n+import React, { useEffect, useState } from \"react\";\r\n+import axios from \"axios\";\r\n \r\n-function HomePrivate() {\r\n+const apiBase = import.meta.env.VITE_API_BASE || \"http://localhost:5000\";\r\n+\r\n+function PrivateModePage({ currentUser, togglePrivacy }) {\r\n+  const [tasks, setTasks] = useState([]);\r\n+\r\n+  useEffect(() => {\r\n+    if (!currentUser) return;\r\n+\r\n+    const fetchPrivateTasks = async () => {\r\n+      try {\r\n+        const response = await axios.get(`${apiBase}/tasks/private`, {\r\n+          params: { userId: currentUser._id },\r\n+        });\r\n+        setTasks(response.data);\r\n+      } catch (err) {\r\n+        console.error(\"‚ùå Failed to fetch private tasks:\", err);\r\n+      }\r\n+    };\r\n+\r\n+    fetchPrivateTasks();\r\n+  }, [currentUser]);\r\n+\r\n+  if (!currentUser) return <p>Loading...</p>;\r\n+\r\n   return (\r\n-    <div>\r\n-      <HomePrivateComponent />\r\n+    <div className=\"private-mode-container\">\r\n+      <h1>Private Mode</h1>\r\n+\r\n+      <div className=\"privacy-section\">\r\n+        <h4>PRIVACY SETTINGS</h4>\r\n+        <div className=\"privacy-toggle\">\r\n+          <span>Private Mode:</span>\r\n+          <label className=\"toggle-switch\">\r\n+            <input\r\n+              type=\"checkbox\"\r\n+              checked={currentUser.isPrivate}\r\n+              onChange={togglePrivacy}\r\n+            />\r\n+            <span className=\"toggle-slider\"></span>\r\n+          </label>\r\n+          <span\r\n+            className={`privacy-status ${\r\n+              currentUser.isPrivate ? \"private\" : \"public\"\r\n+            }`}\r\n+          >\r\n+            {currentUser.isPrivate ? \"PRIVATE\" : \"PUBLIC\"}\r\n+          </span>\r\n+        </div>\r\n+        <p className=\"privacy-description\">\r\n+          {currentUser.isPrivate\r\n+            ? \"Your tasks are hidden from friends\"\r\n+            : \"Friends can see your tasks\"}\r\n+        </p>\r\n+      </div>\r\n+\r\n+      <div className=\"private-tasks\">\r\n+        <h2>Your Private Tasks</h2>\r\n+        {tasks.length === 0 ? (\r\n+          <p>No private tasks available</p>\r\n+        ) : (\r\n+          <ul className=\"task-list\">\r\n+            {tasks.map((task) => (\r\n+              <li key={task._id}>\r\n+                <strong>{task.title}</strong> - {task.description}\r\n+              </li>\r\n+            ))}\r\n+          </ul>\r\n+        )}\r\n+      </div>\r\n     </div>\r\n   );\r\n }\r\n \r\n-export default HomePrivate;\r\n+export default PrivateModePage;\r\n"
                },
                {
                    "date": 1758795403854,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     if (!currentUser) return;\r\n \r\n     const fetchPrivateTasks = async () => {\r\n       try {\r\n-        const response = await axios.get(`${apiBase}/tasks/private`, {\r\n+        const response = await axios.get(`${apiBase}/tasks/public`, {\r\n           params: { userId: currentUser._id },\r\n         });\r\n         setTasks(response.data);\r\n       } catch (err) {\r\n"
                },
                {
                    "date": 1758800551047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     if (!currentUser) return;\r\n \r\n     const fetchPrivateTasks = async () => {\r\n       try {\r\n-        const response = await axios.get(`${apiBase}/tasks/public`, {\r\n+        const response = await axios.get(`${apiBase}/tasks/private-mode`, {\r\n           params: { userId: currentUser._id },\r\n         });\r\n         setTasks(response.data);\r\n       } catch (err) {\r\n"
                },
                {
                    "date": 1758801609218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     if (!currentUser) return;\r\n \r\n     const fetchPrivateTasks = async () => {\r\n       try {\r\n-        const response = await axios.get(`${apiBase}/tasks/private-mode`, {\r\n+        const response = await axios.get(`${apiBase}/tasks/private`, {\r\n           params: { userId: currentUser._id },\r\n         });\r\n         setTasks(response.data);\r\n       } catch (err) {\r\n"
                },
                {
                    "date": 1758801750890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     if (!currentUser) return;\r\n \r\n     const fetchPrivateTasks = async () => {\r\n       try {\r\n-        const response = await axios.get(`${apiBase}/tasks/private`, {\r\n+        const response = await axios.get(`${apiBase}/tasks/public`, {\r\n           params: { userId: currentUser._id },\r\n         });\r\n         setTasks(response.data);\r\n       } catch (err) {\r\n"
                },
                {
                    "date": 1758801863745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n     if (!currentUser) return;\r\n \r\n     const fetchPrivateTasks = async () => {\r\n       try {\r\n-        const response = await axios.get(`${apiBase}/tasks/public`, {\r\n+        const response = await axios.get(`${apiBase}/tasks/private`, {\r\n           params: { userId: currentUser._id },\r\n         });\r\n         setTasks(response.data);\r\n       } catch (err) {\r\n"
                },
                {
                    "date": 1758802869418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import React, { useEffect, useState } from \"react\";\r\n+import HomePrivateComponent from \"../components/homePrivateComponent\";\r\n import axios from \"axios\";\r\n \r\n const apiBase = import.meta.env.VITE_API_BASE || \"http://localhost:5000\";\r\n \r\n@@ -69,8 +70,9 @@\n             ))}\r\n           </ul>\r\n         )}\r\n       </div>\r\n+      <HomePrivateComponent currentUser={currentUser} togglePrivacy={togglePrivacy} />\r\n     </div>\r\n   );\r\n }\r\n \r\n"
                },
                {
                    "date": 1758803712485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,82 +1,52 @@\n-import React, { useEffect, useState } from \"react\";\r\n-import HomePrivateComponent from \"../components/homePrivateComponent\";\r\n+import { useEffect, useState } from \"react\";\r\n import axios from \"axios\";\r\n \r\n const apiBase = import.meta.env.VITE_API_BASE || \"http://localhost:5000\";\r\n \r\n-function PrivateModePage({ currentUser, togglePrivacy }) {\r\n+function HomePrivate({ currentUser, togglePrivacy }) {\r\n   const [tasks, setTasks] = useState([]);\r\n \r\n+  // ---------------- Fetch Private Tasks ----------------\r\n   useEffect(() => {\r\n     if (!currentUser) return;\r\n \r\n     const fetchPrivateTasks = async () => {\r\n       try {\r\n-        const response = await axios.get(`${apiBase}/tasks/private`, {\r\n-          params: { userId: currentUser._id },\r\n-        });\r\n-        setTasks(response.data);\r\n+        const response = await axios.get(\r\n+          `${apiBase}/tasks/private?userId=${currentUser._id}`,\r\n+          { withCredentials: true }\r\n+        );\r\n+        setTasks(response.data.tasks || []);\r\n       } catch (err) {\r\n         console.error(\"‚ùå Failed to fetch private tasks:\", err);\r\n       }\r\n     };\r\n \r\n     fetchPrivateTasks();\r\n   }, [currentUser]);\r\n \r\n-  if (!currentUser) return <p>Loading...</p>;\r\n-\r\n   return (\r\n-    <div className=\"private-mode-container\">\r\n-      <h1>Private Mode</h1>\r\n+    <div>\r\n+      <h1>üîí Private Tasks</h1>\r\n \r\n-      <div className=\"privacy-section\">\r\n-        <h4>PRIVACY SETTINGS</h4>\r\n-        <div className=\"privacy-toggle\">\r\n-          <span>Private Mode:</span>\r\n-          <label className=\"toggle-switch\">\r\n-            <input\r\n-              type=\"checkbox\"\r\n-              checked={currentUser.isPrivate}\r\n-              onChange={togglePrivacy}\r\n-            />\r\n-            <span className=\"toggle-slider\"></span>\r\n-          </label>\r\n-          <span\r\n-            className={`privacy-status ${\r\n-              currentUser.isPrivate ? \"private\" : \"public\"\r\n-            }`}\r\n-          >\r\n-            {currentUser.isPrivate ? \"PRIVATE\" : \"PUBLIC\"}\r\n-          </span>\r\n-        </div>\r\n-        <p className=\"privacy-description\">\r\n-          {currentUser.isPrivate\r\n-            ? \"Your tasks are hidden from friends\"\r\n-            : \"Friends can see your tasks\"}\r\n-        </p>\r\n-      </div>\r\n+      {/* Privacy Toggle */}\r\n+      <label>\r\n+        <input\r\n+          type=\"checkbox\"\r\n+          checked={currentUser.isPrivate}\r\n+          onChange={togglePrivacy}\r\n+        />\r\n+        {currentUser.isPrivate ? \"Private Mode\" : \"Public Mode\"}\r\n+      </label>\r\n \r\n-      <div className=\"private-tasks\">\r\n-        <h2>Your Private Tasks</h2>\r\n-        {tasks.length === 0 ? (\r\n-          <p>No private tasks available</p>\r\n-        ) : (\r\n-          <ul className=\"task-list\">\r\n-            {tasks.map((task) => (\r\n-              <li key={task._id}>\r\n-                <strong>{task.title}</strong> - {task.description}\r\n-              </li>\r\n-            ))}\r\n-          </ul>\r\n-        )}\r\n-      </div>\r\n-      <HomePrivateComponent\r\n-        currentUser={currentUser}\r\n-        togglePrivacy={togglePrivacy}\r\n-      />\r\n+      {/* Private Tasks List */}\r\n+      <ul>\r\n+        {tasks.map((task) => (\r\n+          <li key={task._id}>{task.title}</li>\r\n+        ))}\r\n+      </ul>\r\n     </div>\r\n   );\r\n }\r\n \r\n-export default PrivateModePage;\r\n+export default HomePrivate;\r\n"
                },
                {
                    "date": 1758804062734,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import { useEffect, useState } from \"react\";\r\n import axios from \"axios\";\r\n-\r\n+import HomePrivateComponent from \"../components/homePrivateComponent\";\r\n const apiBase = import.meta.env.VITE_API_BASE || \"http://localhost:5000\";\r\n \r\n function HomePrivate({ currentUser, togglePrivacy }) {\r\n   const [tasks, setTasks] = useState([]);\r\n@@ -44,8 +44,9 @@\n         {tasks.map((task) => (\r\n           <li key={task._id}>{task.title}</li>\r\n         ))}\r\n       </ul>\r\n+        <HomePrivateComponent tasks={tasks} currentUser={currentUser} />\r\n     </div>\r\n   );\r\n }\r\n \r\n"
                }
            ],
            "date": 1758780678993,
            "name": "Commit-0",
            "content": "import React from \"react\";\r\nimport HomePrivateComponent from \"../components/homePrivateComponent\";\r\n\r\nfunction HomePrivate() {\r\n  return (\r\n    <div>\r\n      <HomePrivateComponent />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePrivate;\r\n"
        }
    ]
}